[workspace]
resolver = "2"
members = [
    "core/oxirs-core",
    "server/oxirs-fuseki",
    "server/oxirs-gql",
    "engine/oxirs-arq",
    "engine/oxirs-rule",
    "engine/oxirs-shacl",
    "engine/oxirs-star",
    "engine/oxirs-ttl",
    "engine/oxirs-vec",
    "storage/oxirs-tdb",
    "storage/oxirs-cluster",
    "stream/oxirs-stream",
    "stream/oxirs-federate",
    "ai/oxirs-embed",
    "ai/oxirs-shacl-ai",  # Re-enabled after major refactoring fixes
    "ai/oxirs-chat",
    "tools/oxide",
]

[workspace.package]
version = "0.1.0-alpha.1"
authors = ["KitaSan <info@kitasan.io>"]
edition = "2021"
license = "MIT OR Apache-2.0"
repository = "https://github.com/cool-japan/oxirs"
homepage = "https://github.com/cool-japan/oxirs"
description = "A Rust-native, modular platform for Semantic Web, SPARQL 1.2, GraphQL, and AI-augmented reasoning"
keywords = ["sparql", "rdf", "semantic-web", "graphql", "knowledge-graph"]
categories = ["database", "web-programming", "science"]
rust-version = "1.70"

[workspace.dependencies]
# Core RDF and SPARQL functionality (native OxiRS implementations)
# oxigraph = "0.4.11"  # REMOVED: Replaced with native implementations
# oxjsonld = "0.1.0"   # REMOVED: Replaced with native implementations
# oxrdf = "0.2.0"      # REMOVED: Replaced with native implementations
rio_api = "0.8"
rio_turtle = "0.8"
rio_xml = "0.8"

# Async runtime and HTTP
tokio = { version = "1.45.1", features = ["full"] }
tokio-util = "0.7"
tokio-stream = { version = "0.1", features = ["sync"] }
hyper = { version = "1.6.0", features = ["full"] }
tower = "0.5"
tower-http = { version = "0.6", features = ["cors", "trace"] }

# GraphQL
juniper = "0.16.1"
juniper_hyper = "0.9.0"

# Serialization
serde = { version = "1.0.219", features = ["derive"] }
serde_json = "1.0.140"
toml = "0.8"

# Error handling and logging
anyhow = "1.0"
thiserror = "1.0"
tracing = "0.1"
tracing-subscriber = { version = "0.3", features = ["env-filter", "json", "fmt"] }

# Storage and persistence
rocksdb = "0.22"

# Text search
tantivy = "0.22"

# Vector search
hnsw_rs = "0.3"

# Streaming
rdkafka = "0.36"
async-nats = "0.33"

# Clustering
openraft = "0.9"

# CLI
clap = { version = "4.4", features = ["derive"] }

# Testing
criterion = { version = "0.5", features = ["html_reports"] }
proptest = "1.4"
tempfile = "3.20"

# Additional dependencies
async-trait = "0.1"
uuid = { version = "1.10", features = ["v4", "serde"] }
chrono = { version = "0.4.38", features = ["serde"] }

# Arrow crates (latest stable versions)
arrow = "53.4.0"
arrow-array = "53.4.0"
arrow-buffer = "53.4.0"
arrow-data = "53.4.0"
arrow-arith = "53.4.0"
arrow-cast = "53.4.0"
arrow-csv = "53.4.0"
arrow-ipc = "53.4.0"
arrow-json = "53.4.0"
arrow-ord = "53.4.0"
arrow-row = "53.4.0"
arrow-select = "53.4.0"
arrow-string = "53.4.0"
arrow-schema = "53.4.0"
parquet = "53.4.0"
# DataFusion compatible with arrow 53.4.0
datafusion = "43.0.0"
datafusion-common = "43.0.0"
datafusion-expr = "43.0.0"
datafusion-physical-expr = "43.0.0"
datafusion-physical-plan = "43.0.0"
datafusion-optimizer = "43.0.0"
datafusion-sql = "43.0.0"

# WebSocket support for GraphQL subscriptions
tokio-tungstenite = "0.21"
futures-util = "0.3"
futures = "0.3"

# Rand (using 0.8.5 for compatibility with dependencies)
rand = "0.8.5"
rand_core = "0.6"
rand_distr = "0.4"
fastrand = "2.2"

# System utilities
num_cpus = "1.16"
url = { version = "2.5", features = ["serde"] }
rayon = "1.10"

[workspace.metadata.docs.rs]
all-features = true
rustdoc-args = ["--cfg", "docsrs"]

# Feature flags to keep optional dependencies out of default builds
[workspace.lints.rust]
unsafe_code = "forbid"

[workspace.lints.clippy]
all = "warn"
pedantic = "warn"
nursery = "warn"
cargo = "warn"

