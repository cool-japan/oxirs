[workspace]
resolver = "2"
members = [
    "core/oxirs-core",
    "server/oxirs-fuseki",
    "server/oxirs-gql",
    "engine/oxirs-arq",
    "engine/oxirs-rule",
    "engine/oxirs-shacl",
    "engine/oxirs-star",
    "engine/oxirs-vec",
    "storage/oxirs-tdb",
    "storage/oxirs-cluster",
    "stream/oxirs-stream",
    "stream/oxirs-federate",
    "ai/oxirs-embed",
    "ai/oxirs-shacl-ai",
    "ai/oxirs-chat",
    "tools/oxide",
]

[workspace.package]
version = "0.1.0-alpha.1"
authors = ["KitaSan <info@kitasan.io>"]
edition = "2021"
license = "MIT OR Apache-2.0"
repository = "https://github.com/cool-japan/oxirs"
homepage = "https://github.com/cool-japan/oxirs"
description = "A Rust-native, modular platform for Semantic Web, SPARQL 1.2, GraphQL, and AI-augmented reasoning"
keywords = ["sparql", "rdf", "semantic-web", "graphql", "knowledge-graph"]
categories = ["database", "web-programming", "science"]
rust-version = "1.70"

[workspace.dependencies]
# Core RDF and SPARQL functionality (native OxiRS implementations)
# oxigraph = "0.4.11"  # REMOVED: Replaced with native implementations
# oxjsonld = "0.1.0"   # REMOVED: Replaced with native implementations
# oxrdf = "0.2.0"      # REMOVED: Replaced with native implementations
rio_api = "0.8"
rio_turtle = "0.8"
rio_xml = "0.8"

# Async runtime and HTTP
tokio = { version = "1.0", features = ["full"] }
tokio-util = "0.7"
hyper = { version = "1.0", features = ["full"] }
tower = "0.4"
tower-http = { version = "0.5", features = ["cors", "trace"] }

# GraphQL
juniper = "0.16.1"
juniper_hyper = "0.9.0"

# Serialization
serde = { version = "1.0", features = ["derive"] }
serde_json = "1.0"
toml = "0.8"

# Error handling and logging
anyhow = "1.0"
thiserror = "1.0"
tracing = "0.1"
tracing-subscriber = { version = "0.3", features = ["env-filter"] }

# Storage and persistence
# rocksdb = "0.22"  # Commented out due to conflict with oxigraph

# Text search
tantivy = "0.22"

# Vector search
hnsw_rs = "0.3"

# Streaming
rdkafka = "0.36"
async-nats = "0.33"

# Clustering
openraft = "0.9"

# CLI
clap = { version = "4.4", features = ["derive"] }

# Testing
criterion = { version = "0.5", features = ["html_reports"] }
proptest = "1.4"

# Additional dependencies
async-trait = "0.1"
uuid = { version = "1.10", features = ["v4", "serde"] }
chrono = { version = "0.4", features = ["serde"] }

# WebSocket support for GraphQL subscriptions
tokio-tungstenite = "0.21"
futures-util = "0.3"

# Rand must be the latest version
rand = "0.9.1"

[workspace.metadata.docs.rs]
all-features = true
rustdoc-args = ["--cfg", "docsrs"]

# Feature flags to keep optional dependencies out of default builds
[workspace.lints.rust]
unsafe_code = "forbid"

[workspace.lints.clippy]
all = "warn"
pedantic = "warn"
nursery = "warn"
cargo = "warn"

