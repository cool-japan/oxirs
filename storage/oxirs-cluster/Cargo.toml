[package]
name = "oxirs-cluster"
version.workspace = true
authors.workspace = true
edition.workspace = true
license.workspace = true
repository.workspace = true
homepage.workspace = true
description = "Raft-backed distributed dataset for high availability and horizontal scaling"
keywords = ["distributed", "raft", "clustering", "consensus", "rdf"]
categories = ["database", "network-programming", "concurrency"]
rust-version.workspace = true

[dependencies]
oxirs-core.workspace = true

# SciRS2 dependencies for distributed processing with full feature support
scirs2-cluster = { workspace = true }
scirs2-optimize = { workspace = true }
scirs2-stats = { workspace = true }
scirs2-graph = { workspace = true }
scirs2-core = { workspace = true, features = ["random", "array", "parallel", "simd", "profiling"] }
# oxirs-tdb = { path = "../oxirs-tdb" }  # Temporarily commented out due to compilation issues
openraft = { workspace = true, optional = true }
tokio.workspace = true
serde.workspace = true
serde_json.workspace = true
anyhow.workspace = true
thiserror.workspace = true
tracing.workspace = true
uuid.workspace = true
async-trait.workspace = true
reqwest = { workspace = true }
futures.workspace = true
num_cpus.workspace = true
rayon = "1.10"  # Parallel processing for SIMD-accelerated operations

# Byzantine fault tolerance dependencies
sha2 = "0.10"
hex = "0.4"
ed25519-dalek = "2.1"
rand = "0.9"  # Required by ed25519-dalek for key generation
# Note: For other random functionality, use scirs2_core::random

# MVCC dependencies
dashmap = "6.1"
chrono.workspace = true
parking_lot = "0.12"

# TLS and encryption dependencies
rustls = { version = "0.23", features = ["ring"] }
tokio-rustls = "0.26"
rustls-pemfile = "2.2"
rcgen = "0.14"
webpki-roots = "1.0"
ring = "0.17"
aes-gcm = "0.10"
x25519-dalek = "2.0"
base64 = "0.22"

# Compression and serialization dependencies
flate2 = "1.1"
zstd = "0.13"
lz4_flex.workspace = true
xz2 = "0.1"  # LZMA compression for high-ratio compression
crc32fast = "1.5"
oxicode.workspace = true  # Replaces bincode per COOLJAPAN Policy
rmp-serde = "1.3"
serde_cbor = "0.11"

# Storage dependencies
lmdb = "0.8"
memmap2 = "0.9"

# OpenTelemetry for distributed tracing
opentelemetry.workspace = true
opentelemetry-otlp.workspace = true
opentelemetry_sdk.workspace = true
opentelemetry-semantic-conventions.workspace = true
tracing-opentelemetry = "0.28"
tracing-subscriber = { version = "0.3", features = ["env-filter", "json"] }

# Alerting and monitoring dependencies
lettre = { version = "0.11", features = ["tokio1-native-tls"] }
slack-hook2 = "0.10"

# Web dashboard dependencies
axum = { version = "0.7", features = ["macros"] }
tower = "0.5"
tower-http = { version = "0.6", features = ["cors", "compression-gzip"] }

[dev-dependencies]
criterion.workspace = true
tempfile = "3.24"
proptest = "1.7"

[features]
default = []
raft = ["openraft"]
bft = []
test-support = []
leak_detection = []
cuda = []   # GPU acceleration with CUDA (NVIDIA)
metal = []  # GPU acceleration with Metal (Apple Silicon)

[package.metadata.docs.rs]
# lmdb requires system library, but is always enabled (non-optional)
# This crate may fail on docs.rs due to lmdb C library requirement
# Consider making lmdb optional in the future
rustdoc-args = ["--cfg", "docsrs"]

