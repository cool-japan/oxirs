[package]
name = "oxirs-stream"
version.workspace = true
authors.workspace = true
edition.workspace = true
license.workspace = true
repository.workspace = true
homepage.workspace = true
description = "Real-time streaming support with Kafka/NATS I/O, RDF Patch, and SPARQL Update delta"
keywords.workspace = true
categories.workspace = true
rust-version.workspace = true

[dependencies]
oxirs-core = { path = "../../core/oxirs-core" }
tokio.workspace = true
serde.workspace = true
serde_json.workspace = true
anyhow.workspace = true
thiserror.workspace = true
tracing.workspace = true
rdkafka = { workspace = true, optional = true }
async-nats = { workspace = true, optional = true }
chrono.workspace = true
uuid.workspace = true
regex = "1.11"
futures-util.workspace = true
futures.workspace = true
async-trait = "0.1"
parking_lot = "0.12.3"
bytes = "1.10"
fastrand = "2.3"
bumpalo = "3.18"
quick-xml = "0.37"
rayon = "1.10"
aws-config = { version = "1.5", optional = true }
aws-sdk-kinesis = { version = "1.53", optional = true }
aws-smithy-types = { version = "1.2", optional = true }
redis = { version = "0.27", features = ["tokio-comp", "connection-manager", "cluster-async", "streams"], optional = true }
pulsar = { version = "6.2", optional = true }
time = { version = "0.3", optional = true }
toml = "0.8"
rmp-serde = "1.3"
serde_cbor = "0.11"
bincode = "1.3"
flate2 = "1.0"
zstd = "0.13"
reqwest = { version = "0.12", features = ["json"] }
hmac = "0.12"
sha2 = "0.10"
hex = "0.4"
rand.workspace = true
prost = "0.13"
prost-types = "0.13"
apache-avro = "0.17"
tokio-stream = "0.1"
lz4_flex = "0.11"
crc32fast = "1.4"
dashmap = "6.1"
num_cpus = "1.16"
nalgebra = "0.33"
num-complex = "0.4"
# OpenTelemetry for enhanced observability (optional)
opentelemetry = { workspace = true, optional = true }
opentelemetry-jaeger = { workspace = true, optional = true }
opentelemetry_sdk = { workspace = true, optional = true }
opentelemetry-semantic-conventions = { workspace = true, optional = true }

[dev-dependencies]
criterion.workspace = true
tempfile.workspace = true
tracing-subscriber = "0.3"

[features]
default = ["memory"]
memory = []
kafka = ["rdkafka"]
nats = ["async-nats", "time"]
kinesis = ["aws-config", "aws-sdk-kinesis", "aws-smithy-types"]
redis = ["dep:redis"]
pulsar = ["dep:pulsar"]
opentelemetry = ["dep:opentelemetry", "dep:opentelemetry-jaeger", "dep:opentelemetry_sdk", "dep:opentelemetry-semantic-conventions"]
all-backends = ["kafka", "nats", "kinesis", "redis", "pulsar"]

[[bench]]
name = "performance_benchmarks"
harness = false

