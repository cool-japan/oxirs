[package]
name = "oxirs-stream"
version.workspace = true
authors.workspace = true
edition.workspace = true
license.workspace = true
repository.workspace = true
homepage.workspace = true
description = "Real-time streaming support with Kafka/NATS I/O, RDF Patch, and SPARQL Update delta"
keywords.workspace = true
categories.workspace = true
rust-version.workspace = true

[dependencies]
oxirs-core = { path = "../../core/oxirs-core" }
tokio.workspace = true
serde.workspace = true
serde_json.workspace = true
anyhow.workspace = true
thiserror.workspace = true
tracing.workspace = true
rdkafka = { workspace = true, optional = true }
async-nats = { workspace = true, optional = true }
chrono.workspace = true
uuid.workspace = true
regex = "1.10"
futures-util.workspace = true
futures.workspace = true
async-trait = "0.1"
parking_lot = "0.12"
bytes = "1.5"
fastrand = "2.0"
bumpalo = "3.0"
quick-xml = "0.31"
rayon = "1.10"
aws-config = { version = "1.1", optional = true }
aws-sdk-kinesis = { version = "1.1", optional = true }
aws-smithy-types = { version = "1.1", optional = true }
redis = { version = "0.24", features = ["tokio-comp", "connection-manager", "cluster-async", "streams"], optional = true }
pulsar = { version = "6.0", optional = true }
time = { version = "0.3", optional = true }
toml = "0.8"
rmp-serde = "1.1"
serde_cbor = "0.11"
bincode = "1.3"
flate2 = "1.0"
zstd = "0.13"
reqwest = { version = "0.12", features = ["json"] }
hmac = "0.12"
sha2 = "0.10"
hex = "0.4"
rand.workspace = true
prost = "0.12"
prost-types = "0.12"
apache-avro = "0.16"
tokio-stream = "0.1"
lz4_flex = "0.11"
crc32fast = "1.4"
dashmap = "6.0"
num_cpus = "1.16"

[dev-dependencies]
criterion.workspace = true
tempfile = "3.20"
tracing-subscriber = "0.3"

[features]
default = []
kafka = ["rdkafka"]
nats = ["async-nats", "time"]
kinesis = ["aws-config", "aws-sdk-kinesis", "aws-smithy-types"]
redis = ["dep:redis"]
pulsar = ["dep:pulsar"]

[[bench]]
name = "performance_benchmarks"
harness = false

